
# Product Management API

Этот проект предоставляет API для управления продуктами и категориями с возможностью загрузки и раздачи файлов. Проект использует Node.js, Express, Sequelize, PostgreSQL и Multer.

## Оглавление

- [Установка](#установка)
- [Настройка базы данных](#настройка-базы-данных)
- [Запуск приложения](#запуск-приложения)
- [Тестирование API](#тестирование-api)
- [Структура проекта](#структура-проекта)

## Установка

1. Склонируйте репозиторий:

   ```bash
   git clone https://github.com/Taratheliberator/laba_on_node_with_database_with_files
   cd product-management-api
   ```

2. Установите зависимости:

   ```bash
   npm install
   ```

## Настройка базы данных

1. Убедитесь, что PostgreSQL установлен и запущен на вашем компьютере.
2. Создайте базу данных с именем `product_db` (или другим, если вы изменили название в конфигурации).
3. Настройте подключение к базе данных в файле `config/database.js`. Например:

   ```javascript
   const sequelize = new Sequelize('product_db', 'postgres', 'postgres', {
     host: 'localhost',
     dialect: 'postgres',
     logging: false
   });
   ```

## Запуск приложения

1. Создайте папку для хранения загруженных файлов:

   ```bash
   mkdir uploads
   ```

2. Запустите сервер:

   ```bash
   node app.js
   ```

   Либо используйте `nodemon` для автоматического перезапуска при изменениях:

   ```bash
   npx nodemon app.js
   ```

3. Сервер будет запущен по адресу `http://localhost:3000`.

## Тестирование API

### Просмотр всех категорий

- **URL**: `GET /categories`
- **Описание**: Возвращает все категории.

### Создание новой категории

- **URL**: `POST /categories`
- **Описание**: Создает новую категорию.
- **Тело запроса**:

  ```json
  {
    "name": "Название категории"
  }
  ```

### Просмотр всех продуктов

- **URL**: `GET /products`
- **Описание**: Возвращает все продукты вместе с их категориями.

### Создание нового продукта

- **URL**: `POST /products`
- **Описание**: Создает новый продукт.
- **Тело запроса**:

  ```json
  {
    "name": "Название продукта",
    "price": 100,
    "categoryId": 1
  }
  ```

### Загрузка изображения продукта

- **URL**: `POST /products/upload`
- **Описание**: Загружает изображение продукта.
- **Тело запроса (формат form-data)**:
  - **Ключ**: `image`
  - **Тип**: File
  - **Значение**: Выберите файл для загрузки

После успешной загрузки сервер вернёт путь к файлу, который можно использовать для доступа к изображению.

### Пример использования Postman

Для тестирования загрузки файла:
1. Выберите метод `POST` и URL `http://localhost:3000/products/upload`.
2. Перейдите в **Body** -> **form-data**.
3. Добавьте поле `image` (тип File) и выберите файл для загрузки.
4. Нажмите **Send**.

## Структура проекта

```
├── config
│   └── database.js           # Конфигурация базы данных
├── controllers
│   ├── categoryController.js  # Логика для категорий
│   └── productController.js   # Логика для продуктов
├── models
│   ├── Category.js            # Модель категории
│   └── Product.js             # Модель продукта
├── routes
│   ├── categoryRoutes.js      # Роуты для категорий
│   └── productRoutes.js       # Роуты для продуктов
├── uploads                    # Папка для хранения загруженных файлов
├── app.js                     # Основной файл приложения
└── README.md                  # Инструкция по настройке и запуску
```

## Зависимости

- **Express**: Веб-фреймворк для создания API.
- **Sequelize**: ORM для работы с базой данных.
- **PostgreSQL**: База данных.
- **Multer**: Middleware для обработки загрузки файлов.
- **Nodemon**: Удобство автоматической перезагрузки сервера при разработке (опционально).


